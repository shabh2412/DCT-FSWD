<!DOCTYPE html>
<html>
<!-- 
  https://www.freecodecamp.org/news/event-delegation-javascript/
 -->

<head>
  <title>Calculator</title>
  <style>
    #calculatorDiv {
      border: 1px solid salmon;
      padding: 15px;
      border-radius: 5px;
    }

    p {
      margin: 0;
      width: 100%;
    }

    p#display {
      background-color: black;
      font-size: 16px;
      height: 20px;
      color: white;
    }
  </style>
</head>

<body>
  <h1 style="text-align: center;">Calculator</h1>
  <div id="calculatorDiv">
    <div id="displayDiv">
      <p id="display"></p>
    </div>
    <div id="buttonsDiv">
      <div class="row">
        <button name="calculatorButton">1</button>
        <button name="calculatorButton">2</button>
        <button name="calculatorButton">3</button>
        <button name="calculatorButton">+</button>
      </div>
      <div class="row">
        <button name="calculatorButton">4</button>
        <button name="calculatorButton">5</button>
        <button name="calculatorButton">6</button>
        <button name="calculatorButton">-</button>
      </div>
      <div class="row">
        <button name="calculatorButton">7</button>
        <button name="calculatorButton">8</button>
        <button name="calculatorButton">9</button>
        <button name="calculatorButton">*</button>
      </div>
      <div class="row">
        <button name="calculatorButton">C</button>
        <button name="calculatorButton">0</button>
        <button name="calculatorButton">=</button>
        <button name="calculatorButton">/</button>
      </div>
    </div>
  </div>
  <div id="example">
    (div>button*4)*4
  </div>
</body>
<script>
  const display = document.querySelector("#display");
  // console.log(display);
  function addInDisplay() {
    console.log("event generated");
  }
  // const btn = document.querySelector("button");
  // btn.addEventListener("click", addInDisplay)
  const btnList = document.querySelectorAll("button");
  // btnList.addEventListener("click", addInDisplay); // this will not work here
  const length = btnList.length;
  // for (let i = 0; i < length; i++) {
  //   btnList[i].addEventListener("click", function (myEvent) {
  //     console.log("hello");
  //     console.log(myEvent.target);
  //     // myEvent?.stopPropagation();
  //     // const buttonText = btnList[i].innerText;
  //     const buttonText = myEvent.target.innerText;
  //     const previousDisplayText = display.innerText;
  //     const newText = previousDisplayText + buttonText;
  //     display.innerText = newText;
  //     if (buttonText === "C") {
  //       display.innerText = "";
  //     }
  //     else if (buttonText === "=") {
  //       const result = eval(previousDisplayText);
  //       display.innerText = result;
  //     }
  //   });
  // }

  const buttonsDiv = document.getElementById("buttonsDiv");

  buttonsDiv.addEventListener("click", function (eventX) {
    console.log("clicked something");
    console.log(eventX.target);
    console.log(eventX?.target?.type);
    // eventX.stopPropagation();
    if (eventX?.target?.name === "calculatorButton") {

      const buttonText = eventX.target.innerText;
      const previousDisplayText = display.innerText;
      const newText = previousDisplayText + buttonText;
      display.innerText = newText;
      if (buttonText === "C") {
        display.innerText = "";
      }
      else if (buttonText === "=") {
        const result = eval(previousDisplayText);
        display.innerText = result;
      }
    }
  });
  // console.log(btn);
</script>

</html>